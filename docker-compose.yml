services:
  # Serviço do Site (Painel Web)
  web:
    build: .
    container_name: conekta_web
    command: uvicorn app:app --host 0.0.0.0 --port 8000
    volumes:
      - .:/app  # Monta a pasta atual para salvar o database.db no seu servidor real
    ports:
      - "8000:8000"
    environment:
      - TZ=America/Sao_Paulo # Define o fuso horário correto
    restart: always

  # Serviço do Gerente (Bots)
  manager:
    build: .
    container_name: conekta_manager
    command: python manager.py
    volumes:
      - .:/app  # Importante: usa o mesmo volume para ler o banco que o site editou
    environment:
      - TZ=America/Sao_Paulo
    restart: always